{"version":3,"file":"index.js","sources":["pages/todo/index.vue","../../../../programs/HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdG9kby9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"todo-page\">\r\n    <view class=\"tabs\">\r\n      <view\r\n        v-for=\"tab in tabs\"\r\n        :key=\"tab.key\"\r\n        class=\"tab-item\"\r\n        :class=\"{ active: activeTab === tab.key }\"\r\n        @tap=\"switchTab(tab.key)\"\r\n      >\r\n        {{ tab.label }}\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"stat-line\">\r\n      <text>{{ statText }}</text>\r\n    </view>\r\n\r\n    <view v-if=\"listLoading\" class=\"empty\">加载中...</view>\r\n    <view v-else-if=\"!visibleTodos.length\" class=\"empty\">暂无待办</view>\n\n    <view v-else class=\"card-list\">\n      <view\n        v-for=\"item in visibleTodos\"\n        :key=\"item.id\"\n        class=\"todo-card\"\n        :class=\"cardClasses(item)\"\n      >\n        <view class=\"left-bar\"></view>\r\n        <view class=\"card-content\">\r\n          <view class=\"card-header\">\r\n            <text class=\"card-title\" :class=\"{ done: isDone(item) }\">\n              {{ item.title }}\n            </text>\n            <text class=\"card-time\" v-if=\"deadlineLabel(item)\">\r\n              {{ deadlineLabel(item) }}\r\n            </text>\r\n          </view>\r\n\r\n          <view class=\"card-meta\">\r\n            <text v-if=\"item.note\" class=\"note\">{{ item.note }}</text>\r\n          </view>\r\n\r\n          <view class=\"card-actions\">\r\n            <view\r\n              class=\"btn primary\"\n              v-if=\"!isDone(item)\"\n              @tap=\"markDone(item)\"\n            >\n              完成\n            </view>\n            <view\n              class=\"btn ghost\"\n              v-else\n              @tap=\"undoDone(item)\"\n            >\n              撤销完成\n            </view>\n            <view class=\"btn danger\" @tap=\"removeTodo(item)\">\r\n              删除\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"bottom-nav\">\n      <view class=\"nav-item\" @tap=\"goTimeline\">\n        <text class=\"nav-label\">Event</text>\n      </view>\n      <view class=\"nav-item active\">\n        <text class=\"nav-label main\">Todo</text>\n      </view>\n    </view>\n\n    <!-- 右下角添加按钮 -->\n    <view class=\"fab\" @tap=\"openAdd\">\n      <text class=\"fab-plus\">+</text>\n    </view>\n\n    <!-- 添加弹窗 -->\n    <view v-if=\"showAdd\" class=\"add-mask\" @tap=\"closeAdd\">\n      <view class=\"add-panel\" @tap.stop>\n        <view class=\"add-title\">新建待办</view>\n\n        <view class=\"add-field\">\n          <text class=\"add-label\">标题</text>\n          <input class=\"add-input\" v-model=\"newTitle\" placeholder=\"请输入标题\" />\n        </view>\n\n        <view class=\"add-field\">\n          <text class=\"add-label\">日期</text>\n          <picker mode=\"date\" :value=\"newDate\" @change=\"(e)=>{newDate = e.detail.value}\">\n            <view class=\"add-input\">{{ newDate }}</view>\n          </picker>\n        </view>\n\n        <view class=\"add-field\">\n          <text class=\"add-label\">重要程度</text>\n          <view class=\"priority-row\">\n            <view\n              class=\"pri-btn\"\n              :class=\"{ active: newPriority === 3 }\"\n              @tap=\"pickPriority(3)\"\n            >重要</view>\n            <view\n              class=\"pri-btn\"\n              :class=\"{ active: newPriority === 2 }\"\n              @tap=\"pickPriority(2)\"\n            >普通</view>\n            <view\n              class=\"pri-btn\"\n              :class=\"{ active: newPriority === 1 }\"\n              @tap=\"pickPriority(1)\"\n            >不急</view>\n          </view>\n        </view>\n\n        <view class=\"add-actions\">\n          <view class=\"add-btn\" @tap=\"closeAdd\">取消</view>\n          <view class=\"add-btn primary\" @tap=\"createTodo\">保存</view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\r\n<script setup>\r\nimport { computed, ref } from \"vue\"\nimport { onLoad } from \"@dcloudio/uni-app\"\n\nconst BASE_URL = \"https://k4ge.bar/api\"\nconst TODO_CACHE_KEY = \"cached_todos\"\nconst CACHE_TTL_MS = 2 * 60 * 1000\nconst EVENT_CACHE_PREFIX = \"cached_events\"\n\r\nconst todayStr = () => {\n  const d = new Date()\n  const y = d.getFullYear()\n  const m = String(d.getMonth() + 1).padStart(2, \"0\")\n  const day = String(d.getDate()).padStart(2, \"0\")\n  return `${y}-${m}-${day}`\n}\n\nconst tomorrowStr = () => {\n  const d = new Date()\n  d.setDate(d.getDate() + 1)\n  const y = d.getFullYear()\n  const m = String(d.getMonth() + 1).padStart(2, \"0\")\n  const day = String(d.getDate()).padStart(2, \"0\")\n  return `${y}-${m}-${day}`\n}\n\nconst tabs = [\n  { key: \"today\", label: \"今天到期\" },\n  { key: \"all\", label: \"全部\" },\n  { key: \"important\", label: \"仅重要\" },\n  { key: \"done\", label: \"已完成\" }\n]\n\nconst activeTab = ref(\"today\")\nconst allTodos = ref([])\nconst listLoading = ref(true)\nconst showAdd = ref(false)\nconst newTitle = ref(\"\")\nconst newDate = ref(todayStr())\nconst newPriority = ref(2)\n\r\nconst sortTodos = (list) => {\n  return [...list].sort((a, b) => {\n    const ad = a.deadline_date || \"\"\n    const bd = b.deadline_date || \"\"\n    const at = a.deadline_time || \"\"\n    const bt = b.deadline_time || \"\"\n    if ((a.is_done || 0) !== (b.is_done || 0)) return (a.is_done || 0) - (b.is_done || 0)\n    const cmpDate = ad.localeCompare(bd)\n    if (cmpDate !== 0) return cmpDate\n    const cmpTime = at.localeCompare(bt)\n    if (cmpTime !== 0) return cmpTime\n    const cmpPri = (b.priority || 0) - (a.priority || 0)\n    if (cmpPri !== 0) return cmpPri\n    return (a.id || 0) - (b.id || 0)\n  })\n}\n\nconst filterByTab = (tab, list) => {\n  const today = todayStr()\n  const toMs = (d) => {\n    if (!d) return null\n    const [y, m, day] = d.split(\"-\").map(Number)\n    return new Date(y, m - 1, day).getTime()\n  }\n  const todayMs = toMs(today)\n\n  if (tab === \"today\") {\n    return list.filter((i) => {\n      const ms = toMs(i.deadline_date)\n      if (ms === null) return false\n      if (Number(i.is_done) === 1) {\n        return ms === todayMs // 已完成只看今天\n      }\n      return ms <= todayMs    // 未完成包含今天及逾期\n    })\n  }\n  if (tab === \"important\") return list.filter((i) => Number(i.priority) === 3)\n  if (tab === \"done\") return list.filter((i) => Number(i.is_done) === 1)\n  return list\n}\n\nconst visibleTodos = computed(() => {\n  const filtered = filterByTab(activeTab.value, allTodos.value || [])\n  return sortTodos(filtered)\n})\n\nconst statInfo = computed(() => {\n  const list = visibleTodos.value\n  const done = list.filter((i) => Number(i.is_done) === 1).length\n  return {\n    total: list.length,\n    done,\n    todo: list.length - done\n  }\n})\n\nconst statText = computed(() => {\n  const stats = statInfo.value\n  if (activeTab.value === \"done\") {\n    return `当前已完成 ${stats.done} 项`\n  }\n  const prefix =\n    activeTab.value === \"today\"\n      ? \"今日待办\"\n      : activeTab.value === \"important\"\n        ? \"重要待办\"\n        : \"全部待办\"\n  return `${prefix} ${stats.todo} 项 · 已完成 ${stats.done} 项`\n})\n\nconst normalizeTodo = (t) => ({\n  ...t,\n  is_done: Number(t.is_done) || 0,\n  priority: Number(t.priority) || 0,\n})\n\nconst setTodos = (list) => {\n  allTodos.value = sortTodos((list || []).map(normalizeTodo))\n  try {\n    uni.setStorageSync(TODO_CACHE_KEY, { ts: Date.now(), items: allTodos.value })\n  } catch (e) {}\n}\n\nconst applyLocalStatus = (todoId, isDoneFlag) => {\n  const nowStr = (() => {\n    const d = new Date()\n    const y = d.getFullYear()\n    const m = String(d.getMonth() + 1).padStart(2, \"0\")\n    const day = String(d.getDate()).padStart(2, \"0\")\n    const hh = String(d.getHours()).padStart(2, \"0\")\n    const mm = String(d.getMinutes()).padStart(2, \"0\")\n    return `${y}-${m}-${day} ${hh}:${mm}`\n  })()\n  const updated = allTodos.value.map((i) => {\n    if (i.id !== todoId) return i\n    return normalizeTodo({\n      ...i,\n      is_done: isDoneFlag ? 1 : 0,\n      done_at: isDoneFlag ? nowStr : null\n    })\n  })\n  setTodos(updated)\n}\n\nconst fetchTodosAll = () => {\n  listLoading.value = true\n  uni.request({\n    url: `${BASE_URL}/todos/`,\n    method: \"GET\",\n    data: { tab: \"all\" },\n    success: (res) => {\n      if (res.statusCode === 200 && res.data) {\n        setTodos(res.data.items || [])\n      } else {\n        uni.showToast({ title: \"加载失败\", icon: \"none\" })\n      }\n    },\n    fail: () => uni.showToast({ title: \"网络异常\", icon: \"none\" }),\n    complete: () => {\n      listLoading.value = false\n    }\n  })\n}\n\nonLoad(() => {\n  // 优先展示缓存\n  try {\n    const cached = uni.getStorageSync(TODO_CACHE_KEY)\n    if (cached && Array.isArray(cached.items)) {\n      setTodos(cached.items)\n      listLoading.value = false\n      if (cached.ts && Date.now() - cached.ts < CACHE_TTL_MS) {\n        return\n      }\n    }\n  } catch (e) {}\n  fetchTodosAll()\n})\n\nconst switchTab = (tab) => {\n  activeTab.value = tab\n}\n\r\nconst deadlineLabel = (item) => {\n  const dateStr = item.deadline_date\n  if (!dateStr) return \"未设置\"\n  const toMs = (d) => {\n    const [y, m, day] = d.split(\"-\").map(Number)\n    return new Date(y, m - 1, day).getTime()\n  }\n  const today = todayStr()\n  const todayMs = toMs(today)\n  const ms = toMs(dateStr)\n  let label = \"\"\n  if (isDone(item)) {\n    if (ms === todayMs) label = \"今天\"\n    else label = dateStr\n  } else {\n    if (ms === todayMs) {\n      label = \"今天\"\n    } else if (ms < todayMs) {\n      const diffDays = Math.max(1, Math.round((todayMs - ms) / 86400000))\n      label = `逾期${diffDays}天`\n    } else {\n      label = dateStr\n    }\n  }\n  return label\n}\n\r\nconst markDone = (item) => {\n  const eventDate = item.deadline_date || todayStr()\n  applyLocalStatus(item.id, 1)\n  uni.request({\n    url: `${BASE_URL}/todos/${item.id}/status/`,\n    method: \"POST\",\n    data: { is_done: 1 },\n    success: (res) => {\n      if (res.statusCode === 200 && res.data?.item) {\n        const updated = normalizeTodo({ ...res.data.item, is_done: 1 })\n        const list = allTodos.value.map((i) => i.id === updated.id ? updated : i)\n        setTodos(list)\n        // 操作后直接刷新对应日期的事件缓存，确保事件页同步\n        refreshEventCache(eventDate)\n      } else {\n        uni.showToast({ title: \"操作失败\", icon: \"none\" })\n      }\n    },\n    fail: () => uni.showToast({ title: \"网络异常\", icon: \"none\" })\n  })\n}\n\nconst undoDone = (item) => {\n  const eventDate = item.deadline_date || todayStr()\n  applyLocalStatus(item.id, 0)\n\n  uni.request({\n    url: `${BASE_URL}/todos/${item.id}/status/`,\n    method: \"POST\",\n    data: { is_done: 0 },\n    success: (res) => {\n      if (res.statusCode === 200 && res.data?.item) {\n        const updated = normalizeTodo({ ...res.data.item, is_done: 0 })\n        const list = allTodos.value.map((i) => i.id === updated.id ? updated : i)\n        setTodos(list)\n        refreshEventCache(eventDate)\n      } else {\n        uni.showToast({ title: \"操作失败\", icon: \"none\" })\n      }\n    },\n    fail: () => uni.showToast({ title: \"网络异常\", icon: \"none\" })\n  })\r\n}\r\n\r\nconst removeTodo = (item) => {\n  uni.showModal({\n    title: \"确认删除？\",\n    content: item.title,\n    success: (res) => {\n      if (!res.confirm) return\r\n      uni.request({\r\n        url: `${BASE_URL}/todos/${item.id}/delete/`,\r\n        method: \"POST\",\n        success: (resp) => {\n          if (resp.statusCode === 200) {\n            const list = allTodos.value.filter((t) => t.id !== item.id)\n            setTodos(list)\n            refreshEventCache(item.deadline_date || todayStr())\n          } else {\n            uni.showToast({ title: \"删除失败\", icon: \"none\" })\n          }\n        },\n        fail: () => uni.showToast({ title: \"网络异常\", icon: \"none\" })\n      })\r\n    }\n  })\n}\n\n// 状态判断，避免字符串 \"0\"/\"1\" 导致样式异常\nconst isDone = (todo) => Number(todo?.is_done) === 1\nconst cardClasses = (item) => {\n  const done = isDone(item)\n  return ['priority-' + item.priority, done ? 'is-done' : 'not-done']\n}\n\nconst goTimeline = () => {\n  uni.redirectTo({\n    url: \"/pages/index/index\"\n  })\n}\n\n// ------- 事件缓存同步，保持与待办联动 -------\nconst eventCacheKey = (date) => `${EVENT_CACHE_PREFIX}_${date || todayStr()}`\n\nconst refreshEventCache = (dateParam) => {\n  const date = dateParam || todayStr()\n  uni.request({\n    url: `${BASE_URL}/events/`,\n    method: \"GET\",\n    data: { date },\n    success: (res) => {\n      if (res.statusCode === 200 && res.data && Array.isArray(res.data.events)) {\n        const list = res.data.events.map(e => ({\n          id: e.id,\n          time: e.start_time || \"\",\n          title: e.title || \"\",\n          raw: e,\n        }))\n        uni.setStorageSync(eventCacheKey(date), { ts: Date.now(), items: list })\n      }\n    },\n  })\n}\n\nconst openAdd = () => {\n  newTitle.value = \"\"\n  newDate.value = todayStr()\n  newPriority.value = 2\n  showAdd.value = true\n}\n\nconst closeAdd = () => {\n  showAdd.value = false\n}\n\nconst pickPriority = (val) => {\n  newPriority.value = val\n}\n\nconst createTodo = () => {\n  const title = newTitle.value.trim()\n  if (!title) {\n    uni.showToast({ title: \"请输入标题\", icon: \"none\" })\n    return\n  }\n  uni.request({\n    url: `${BASE_URL}/todos/create/`,\n    method: \"POST\",\n    data: {\n      title,\n      deadline_date: newDate.value,\n      priority: newPriority.value\n    },\n    success: (res) => {\n      if (res.statusCode === 201) {\n        closeAdd()\n        const newItem = res.data?.item\n        if (newItem) {\n          const list = [...allTodos.value, newItem]\n          setTodos(list)\n        } else {\n          fetchTodosAll()\n        }\n        uni.showToast({ title: \"已添加\", icon: \"success\" })\n      } else {\n        uni.showToast({ title: \"添加失败\", icon: \"none\" })\n      }\n    },\n    fail: () => uni.showToast({ title: \"网络异常\", icon: \"none\" })\n  })\n}\n</script>\n\n<style scoped>\n.todo-page {\r\n  min-height: 100vh;\r\n  background: #f5f6fb;\r\n  padding: 10rpx 28rpx 200rpx;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.tabs {\r\n  display: flex;\r\n  gap: 18rpx;\r\n  margin: 12rpx 0 12rpx;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.tab-item {\r\n  padding: 16rpx 26rpx;\r\n  border-radius: 999rpx;\r\n  background: #f0f1f5;\r\n  color: #4e5364;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.tab-item.active {\r\n  background: #e2e6f5;\r\n  color: #1f2d4a;\r\n  font-weight: 600;\r\n}\r\n\r\n.stat-line {\r\n  color: #7c8090;\r\n  font-size: 24rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.card-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18rpx;\r\n}\r\n\r\n.todo-card {\n  position: relative;\n  background: #ffffff;\n  border-radius: 22rpx;\n  padding: 22rpx 20rpx 18rpx 24rpx;\n  box-shadow: 0 10rpx 24rpx rgba(0, 0, 0, 0.02);\r\n}\r\n\r\n.todo-card .left-bar {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 18rpx;\r\n  bottom: 18rpx;\r\n  width: 8rpx;\r\n  border-radius: 10rpx;\r\n}\r\n\r\n.priority-3 .left-bar {\r\n  background: linear-gradient(180deg, #ffd7db, #ffb4bc);\r\n}\r\n\r\n.priority-2 .left-bar {\r\n  background: linear-gradient(180deg, #ffe9c8, #ffd9a1);\r\n}\r\n\r\n.priority-1 .left-bar {\r\n  background: linear-gradient(180deg, #d7f1e2, #b8e2c9);\r\n}\r\n\r\n.card-content {\r\n  margin-left: 20rpx;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n  margin-bottom: 4rpx;\r\n}\r\n\r\n.card-title {\r\n  font-size: 28rpx;\r\n  font-weight: 700;\r\n  color: #1f2430;\r\n  flex: 1;\r\n}\r\n\r\n.card-time {\r\n  font-size: 22rpx;\r\n  color: #586075;\r\n}\r\n\r\n.card-title.done {\r\n  color: #93a0b4;\r\n  text-decoration: line-through;\r\n}\r\n\r\n.card-meta {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n  color: #667080;\r\n  font-size: 24rpx;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.deadline {\r\n  font-weight: 600;\r\n}\r\n\r\n.note {\r\n  color: #8a92a3;\r\n}\r\n\r\n.card-actions {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  margin-top: 6rpx;\r\n}\r\n\r\n.btn {\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 8rpx;\r\n  font-size: 20rpx;\r\n  font-weight: 600;\r\n  text-align: center;\r\n  min-width: 96rpx;\r\n}\r\n\r\n.btn.primary {\r\n  background: #eef2ff;\r\n  color: #3a4cce;\r\n}\r\n\r\n.btn.ghost {\r\n  background: #f5f6fa;\r\n  color: #2f3542;\r\n}\r\n\r\n.btn.danger {\r\n  background: #ffffff;\r\n  color: #d65a5a;\r\n  border: 2rpx solid #f7dada;\r\n}\r\n\r\n.todo-card.is-done {\n  background: #f2f4f8;\n}\n.todo-card.not-done {\n  background: #ffffff;\n}\n.todo-card.is-done .card-title {\n  color: #93a0b4;\n  text-decoration: line-through;\n}\n.todo-card.not-done .card-title {\n  color: #1f2430;\n  text-decoration: none;\n}\n.todo-card.is-done .card-actions .btn.primary {\n  background: #e6e9f2;\n  color: #6f7a91;\n}\n.todo-card.not-done .card-actions .btn.primary {\n  background: #eef2ff;\n  color: #3a4cce;\n}\n\r\n.empty {\r\n  text-align: center;\r\n  color: #96a0b1;\r\n  padding: 40rpx 0;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.bottom-nav {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 120rpx;\r\n  background-color: #ffffff;\r\n  border-top: 1rpx solid #e5e5e5;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  padding-bottom: 16rpx;\r\n  z-index: 900;\r\n}\r\n\r\n.nav-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex: 1;\r\n  color: #7a7f8c;\r\n  font-size: 24rpx;\r\n  padding: 10rpx 0;\r\n}\r\n\r\n.nav-item.active {\r\n  color: #1f2d4a;\r\n  font-weight: 700;\r\n}\r\n\r\n.nav-label {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.nav-label.main {\n  font-size: 26rpx;\n  letter-spacing: 0.4rpx;\n}\n\n.fab {\n  position: fixed;\n  right: 34rpx;\n  bottom: 180rpx;\n  width: 88rpx;\n  height: 88rpx;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #eef2ff, #e4e9ff);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 12rpx 24rpx rgba(0, 0, 0, 0.14);\n  z-index: 950;\n}\n\n.fab-plus {\n  color: #3d4ed1;\n  font-size: 48rpx;\n  line-height: 1;\n}\n\n.add-mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.35);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.add-panel {\n  width: 84%;\n  background: #ffffff;\n  border-radius: 24rpx;\n  padding: 28rpx 26rpx 24rpx;\n  box-shadow: 0 18rpx 40rpx rgba(0, 0, 0, 0.18);\n}\n\n.add-title {\n  font-size: 30rpx;\n  font-weight: 700;\n  margin-bottom: 18rpx;\n  color: #1f2430;\n}\n\n.add-field {\n  margin-bottom: 18rpx;\n}\n\n.add-label {\n  font-size: 24rpx;\n  color: #60697b;\n  margin-bottom: 8rpx;\n  display: block;\n}\n\n.add-input {\n  width: 100%;\n  border: 1rpx solid #e5e7ef;\n  border-radius: 12rpx;\n  padding: 14rpx 16rpx;\n  height: 72rpx;\n  line-height: 44rpx;\n  font-size: 26rpx;\n  box-sizing: border-box;\n}\n\n.priority-row {\n  display: flex;\n  gap: 12rpx;\n}\n\n.pri-btn {\n  flex: 1;\n  border: 1rpx solid #e5e7ef;\n  border-radius: 12rpx;\n  padding: 14rpx 0;\n  text-align: center;\n  font-size: 24rpx;\n  color: #4c5260;\n}\n\n.pri-btn.active {\n  background: #eef2ff;\n  color: #3d4ed1;\n  border-color: #d9defc;\n}\n\n.add-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12rpx;\n  margin-top: 10rpx;\n}\n\n.add-btn {\n  padding: 12rpx 22rpx;\n  border-radius: 12rpx;\n  font-size: 24rpx;\n  border: 1rpx solid #e5e7ef;\n}\n\n.add-btn.primary {\n  background: #f4f6ff;\n  color: #3d4ed1;\n  border-color: #d9defc;\n}\n</style>\n","import MiniProgramPage from 'E:/projects2/kage-life/kage-life-uniapp-v25.11.0/kage-life-uniapp-v25.11.0/pages/todo/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","onLoad"],"mappings":"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"}