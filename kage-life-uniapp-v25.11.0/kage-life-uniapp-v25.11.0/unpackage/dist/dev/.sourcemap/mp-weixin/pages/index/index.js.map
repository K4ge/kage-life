{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../../programs/HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <!-- 顶部日期 -->\r\n    <view class=\"header\">\r\n      <picker mode=\"date\" :value=\"currentDate\" @change=\"onDateChange\">\r\n        <text class=\"header-title\">{{ currentDate }}</text>\r\n      </picker>\r\n    </view>\r\n\r\n    <!-- 区块：标题 + 时间轴 -->\r\n    <view class=\"section\" v-for=\"section in sections\" :key=\"section.key\">\r\n      <view class=\"section-title\">{{ section.label }}</view>\r\n\r\n      <view class=\"timeline\" v-if=\"section.items.length\">\n        <view class=\"timeline-line\"></view>\n        <view class=\"timeline-list\">\n          <view class=\"timeline-item\" v-for=\"item in section.items\" :key=\"item.id\" @tap=\"openEdit(item)\">\n            <view class=\"dot\"></view>\n            <view class=\"item-content\">\n              <text class=\"item-time\">{{ item.time }}</text>\n              <text class=\"item-text\">{{ item.title }}</text>\n            </view>\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"empty\" v-else>\r\n        <text>暂无记录</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 快速添加事项弹窗 -->\r\n    <view v-if=\"showAddPanel\" class=\"add-mask\" @tap=\"onCancelAdd\">\r\n      <view class=\"add-dialog\" @tap.stop>\r\n        <view class=\"add-title\">快速添加事项</view>\r\n\r\n        <!-- 输入行：先把 title 放进前端，再异步请求后端 -->\r\n        <view class=\"add-input-row\">\r\n          <input\r\n            v-model=\"newTitle\"\r\n            placeholder=\"输入事件标题，先显示在页面\"\r\n            placeholder-style=\"color:#9b9b9b;font-size:24rpx;\"\r\n            confirm-type=\"done\"\r\n            @confirm=\"onManualAdd\"\r\n          />\r\n          <button size=\"mini\" type=\"primary\" @tap=\"onManualAdd\">添加</button>\r\n        </view>\r\n        <view class=\"add-tip\">添加后会先插入列表，再调用后端保存</view>\r\n\r\n        <!-- 快捷选项 -->\r\n        <scroll-view scroll-y=\"true\" style=\"max-height: 400rpx;\">\r\n          <view\r\n            v-for=\"(item, index) in presetOptions\"\r\n            :key=\"index\"\r\n            class=\"add-option\"\r\n            @tap=\"onQuickAdd(index)\"\r\n          >\r\n            <text>{{ item }}</text>\r\n          </view>\r\n        </scroll-view>\r\n\r\n    <view class=\"add-actions\">\n      <button size=\"mini\" @tap=\"onCancelAdd\">关闭</button>\n    </view>\n  </view>\n</view>\n\n<!-- 编辑弹窗 -->\n<view v-if=\"showEdit\" class=\"edit-mask\" @tap=\"closeEdit\">\n  <view class=\"edit-panel\" @tap.stop>\n    <view class=\"edit-title\">编辑事件</view>\n\n    <view class=\"edit-field\">\n      <text class=\"edit-label\">标题</text>\n      <input class=\"edit-input\" v-model=\"editTitle\" placeholder=\"请输入标题\" />\n    </view>\n\n    <view class=\"edit-field\">\n      <text class=\"edit-label\">开始时间</text>\n      <input class=\"edit-input\" v-model=\"editStartTime\" placeholder=\"HH:MM，可留空\" />\n    </view>\n\n    <view class=\"edit-field\">\n      <text class=\"edit-label\">事件类型</text>\n      <input class=\"edit-input\" v-model=\"editType\" placeholder=\"如 reading / dev / run\" />\n    </view>\n\n    <view class=\"edit-field\">\n      <text class=\"edit-label\">数量</text>\n      <input class=\"edit-input\" v-model=\"editValueNumber\" placeholder=\"数字，可留空\" />\n    </view>\n\n    <view class=\"edit-actions\">\n      <button class=\"edit-btn\" @tap=\"closeEdit\">取消</button>\n      <button class=\"edit-btn danger\" @tap=\"deleteEvent\">删除</button>\n      <button class=\"edit-btn primary\" @tap=\"saveEdit\">保存</button>\n    </view>\n  </view>\n</view>\n\r\n    <!-- 右下角添加按钮 -->\r\n    <view class=\"fab\" @tap=\"onAdd\">\r\n      <text class=\"fab-plus\">+</text>\r\n    </view>\r\n\r\n    <!-- 底部切换 -->\r\n    <view class=\"bottom-nav\">\r\n      <view class=\"nav-item active\">\r\n        <text class=\"nav-label main\">Event</text>\r\n      </view>\r\n      <view class=\"nav-item\" @tap=\"goTodo\">\r\n        <text class=\"nav-label\">Todo</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref } from \"vue\"\nimport { onLoad } from \"@dcloudio/uni-app\"\n\nconst BASE_URL = \"https://k4ge.bar/api\"\nconst EVENT_CACHE_PREFIX = \"cached_events\"\nconst TODO_CACHE_KEY = \"cached_todos\"\nconst CACHE_TTL_MS = 2 * 60 * 1000\nconst EVENT_TYPES_CACHE_KEY = \"cached_event_types\"\nconst EVENT_TYPES_TTL_MS = 24 * 60 * 60 * 1000\n\nconst events = ref([])\nconst lastEventsTs = ref(0)\nconst showEdit = ref(false)\nconst editId = ref(null)\nconst editTitle = ref('')\nconst editStartTime = ref('')\nconst editType = ref('')\nconst editValueNumber = ref('')\n\nconst loading = ref(false)\r\nconst errorMsg = ref('')\r\nconst showAddPanel = ref(false)\r\nconst presetOptions = ref([])\r\nconst newTitle = ref('')\r\n\r\nconst now = new Date()\r\nconst y = now.getFullYear()\r\nconst m = String(now.getMonth() + 1).padStart(2, '0')\r\nconst d = String(now.getDate()).padStart(2, '0')\r\nconst today = `${y}-${m}-${d}`\nconst currentDate = ref(today)\n\nonLoad(() => {\n  loadEventsFromCache(currentDate.value)\n  fetchEvents(currentDate.value)\n  loadEventTypes()\n  prefetchTodosAll()\n})\n\nconst cacheKeyForDate = (date) => `${EVENT_CACHE_PREFIX}_${date}`\n\nconst loadEventsFromCache = (dateParam) => {\n  try {\n    const cache = uni.getStorageSync(cacheKeyForDate(dateParam))\n    if (cache && Array.isArray(cache.items)) {\n      events.value = cache.items\n      lastEventsTs.value = cache.ts || 0\n      loading.value = false\n      return true\n    }\n  } catch (e) {}\n  return false\n}\n\nconst saveEventsCache = (dateParam, items) => {\n  try {\n    uni.setStorageSync(cacheKeyForDate(dateParam), { ts: Date.now(), items })\n    lastEventsTs.value = Date.now()\n  } catch (e) {}\n}\n\nconst fetchEvents = (dateParam = currentDate.value, { force = false } = {}) => {\n  currentDate.value = dateParam\n  errorMsg.value = ''\n\n  const freshCache = loadEventsFromCache(dateParam)\n  const cacheAgeOk = freshCache && Date.now() - lastEventsTs.value < CACHE_TTL_MS\n  if (cacheAgeOk && !force) {\n    return\n  }\n\n  loading.value = true\n  uni.request({\n    url: `${BASE_URL}/events/`,\n    method: 'GET',\n    data: { date: dateParam },\n    success: (res) => {\n      if (res.statusCode === 200 && res.data && Array.isArray(res.data.events)) {\n        const list = res.data.events.map(e => ({\n          id: e.id,\n          time: e.start_time || '',\n          title: e.title || '',\n          raw: e,\n        }))\n        events.value = list\n        saveEventsCache(dateParam, list)\n      } else {\n        errorMsg.value = '接口返回异常'\n        console.log('接口异常', res)\n      }\n    },\n    fail: (err) => {\n      errorMsg.value = '网络请求失败'\n      console.error('请求失败', err)\n    },\n    complete: () => {\n      loading.value = false\n    }\n  })\n}\n\nconst loadEventTypes = () => {\n  try {\n    const cached = uni.getStorageSync(EVENT_TYPES_CACHE_KEY)\n    if (cached && cached.items && Date.now() - (cached.ts || 0) < EVENT_TYPES_TTL_MS) {\n      presetOptions.value = cached.items\n      return\n    }\n  } catch (e) {}\n\n  uni.request({\n    url: `${BASE_URL}/event_types/`,\n    method: 'GET',\n    success: (res) => {\n      if (!res.data || !res.data.event_types) {\n        uni.showToast({ title: '类型列表数据格式不对', icon: 'none' })\n        return\n      }\n      const list = res.data.event_types.map((item) => item.description || item.type_name)\n      presetOptions.value = list\n      try {\n        uni.setStorageSync(EVENT_TYPES_CACHE_KEY, { ts: Date.now(), items: list })\n      } catch (e) {}\n    },\n    fail: (err) => {\n      console.error('加载事件类型失败', err)\n      uni.showToast({ title: '加载事件类型失败', icon: 'none' })\n    }\n  })\n}\n\r\nconst toMinutes = (time) => {\r\n  const [h, m] = (time || '00:00').split(':').map(Number)\r\n  return h * 60 + m\r\n}\r\n\r\nconst sections = computed(() => {\r\n  const morning = []\r\n  const noon = []\r\n  const afternoon = []\r\n  const night = []\r\n\r\n  const sorted = [...events.value].sort((a, b) => (a.time || '').localeCompare(b.time || ''))\r\n\r\n  sorted.forEach((e) => {\r\n    const minutes = toMinutes(e.time)\r\n    if (minutes < 11 * 60 + 30) {\r\n      morning.push(e)\r\n    } else if (minutes >= 11 * 60 + 30 && minutes <= 13 * 60 + 30) {\r\n      noon.push(e)\r\n    } else if (minutes < 17 * 60 + 30) {\r\n      afternoon.push(e)\r\n    } else {\r\n      night.push(e)\r\n    }\r\n  })\r\n\r\n  return [\r\n    { key: 'morning', label: '上午', items: morning },\r\n    { key: 'noon', label: '中午', items: noon },\r\n    { key: 'afternoon', label: '下午', items: afternoon },\r\n    { key: 'night', label: '晚上', items: night }\r\n  ]\r\n})\r\n\r\nconst onAdd = () => {\r\n  showAddPanel.value = true\r\n}\r\n\r\nconst buildNowTime = () => {\r\n  const now = new Date()\r\n  const hh = String(now.getHours()).padStart(2, '0')\r\n  const mm = String(now.getMinutes()).padStart(2, '0')\r\n  const time = `${hh}:${mm}`\r\n\r\n  const y = now.getFullYear()\r\n  const m = String(now.getMonth() + 1).padStart(2, '0')\r\n  const d = String(now.getDate()).padStart(2, '0')\r\n  const date = `${y}-${m}-${d}`\r\n\r\n  return { time, date }\r\n}\r\n\r\nconst addEventToFront = (title, timeParam, dateParam) => {\r\n  const { time, date } = timeParam && dateParam ? { time: timeParam, date: dateParam } : buildNowTime()\r\n  const tempId = `temp-${Date.now()}`\r\n\r\n  events.value.push({\r\n    id: tempId,\r\n    time,\r\n    title,\r\n    date,\r\n    raw: { pending: true }\r\n  })\r\n\r\n  return { tempId, time, date }\r\n}\r\n\r\nconst requestCreateEvent = (title, tempId, startTime) => {\r\n  uni.request({\r\n    url: 'https://k4ge.bar/api/events/create/',\r\n    method: 'GET',\r\n    data: { title, start_time: startTime },\r\n    success: (res) => {\r\n      if (res.statusCode === 201 && res.data && res.data.id) {\r\n        const target = events.value.find(e => e.id === tempId)\r\n        if (target) {\r\n          target.id = res.data.id\r\n          target.raw = res.data\r\n        }\r\n        uni.showToast({ title: '已保存', icon: 'success' })\r\n      } else {\r\n        handleCreateFail(tempId, '保存失败')\r\n      }\r\n    },\r\n    fail: () => {\r\n      handleCreateFail(tempId, '网络错误')\r\n    }\r\n  })\r\n}\r\n\r\nconst handleCreateFail = (tempId, message) => {\r\n  events.value = events.value.filter(e => e.id !== tempId)\r\n  uni.showToast({ title: message, icon: 'none' })\r\n}\r\n\r\nconst onQuickAdd = (index) => {\r\n  const title = presetOptions.value[index]\r\n  if (!title) {\r\n    uni.showToast({ title: '选项为空', icon: 'none' })\r\n    return\r\n  }\r\n\r\n  const { tempId, time } = addEventToFront(title)\r\n  showAddPanel.value = false\r\n  requestCreateEvent(title, tempId, time)\r\n}\r\n\r\nconst onManualAdd = () => {\r\n  const title = newTitle.value.trim()\r\n  if (!title) {\r\n    uni.showToast({ title: '请输入标题', icon: 'none' })\r\n    return\r\n  }\r\n\r\n  const { tempId, time } = addEventToFront(title)\r\n  newTitle.value = ''\n  showAddPanel.value = false\n  requestCreateEvent(title, tempId, time)\n}\n\nconst onCancelAdd = () => {\n  showAddPanel.value = false\n  newTitle.value = ''\n}\n\nconst onDateChange = (e) => {\n  const value = e?.detail?.value\n  if (!value) return\n  fetchEvents(value, { force: true })\n}\n\nconst goTodo = () => {\n  uni.redirectTo({\n    url: '/pages/todo/index'\n  })\n}\n\nconst openEdit = (item) => {\n  editId.value = item.id\n  editTitle.value = item.title || ''\n  editStartTime.value = item.time || ''\n  editType.value = item.raw?.event_type || ''\n  editValueNumber.value = item.raw?.value_number ?? ''\n  showEdit.value = true\n}\n\nconst closeEdit = () => {\n  showEdit.value = false\n}\n\nconst saveEdit = () => {\n  if (!editId.value) return\n  const payload = {}\n  if (editTitle.value !== undefined) payload.title = editTitle.value\n  if (editStartTime.value !== undefined) payload.start_time = editStartTime.value\n  if (editType.value !== undefined) payload.event_type = editType.value\n  if (editValueNumber.value !== undefined) payload.value_number = editValueNumber.value\n  uni.request({\n    url: `${BASE_URL}/events/${editId.value}/update/`,\n    method: 'POST',\n    data: payload,\n    success: (res) => {\n      if (res.statusCode === 200 && res.data) {\n        // 本地更新当前日期的事件列表，无需重新请求\n        events.value = events.value.map((e) => {\n          if (e.id !== editId.value) return e\n          const t = res.data.start_time || e.time || ''\n          return {\n            ...e,\n            time: t,\n            title: res.data.title ?? e.title,\n            raw: { ...(e.raw || {}), ...res.data, start_time: t }\n          }\n        })\n        saveEventsCache(currentDate.value, events.value)\n        // 编辑事件后刷新待办缓存，保持联动\n        prefetchTodosAll({ force: true })\n        closeEdit()\n        uni.showToast({ title: '已保存', icon: 'success' })\n      } else {\n        uni.showToast({ title: '保存失败', icon: 'none' })\n      }\n    },\n    fail: () => uni.showToast({ title: '网络异常', icon: 'none' })\n  })\n}\n\nconst deleteEvent = () => {\n  if (!editId.value) return\n  const delId = editId.value\n  uni.showModal({\n    title: '确认删除？',\n    content: editTitle.value || '',\n    success: (res) => {\n      if (!res.confirm) return\n      uni.request({\n        url: `${BASE_URL}/events/${delId}/delete/`,\n        method: 'POST',\n        success: (resp) => {\n          if (resp.statusCode === 200 || resp.statusCode === 404) {\n            // 404 视为已不存在，同步移除本地缓存以保持一致\n            events.value = events.value.filter((e) => e.id !== delId)\n            saveEventsCache(currentDate.value, events.value)\n            // 同步待办缓存：关联的 todo 置为未完成并清理 event_id\n            try {\n              const cachedTodo = uni.getStorageSync(TODO_CACHE_KEY)\n              if (cachedTodo && Array.isArray(cachedTodo.items)) {\n                const updatedTodos = cachedTodo.items.map((t) => {\n                  if (t.event_id === delId) {\n                    return { ...t, is_done: 0, done_at: null, event_id: null }\n                  }\n                  return t\n                })\n                uni.setStorageSync(TODO_CACHE_KEY, { ts: Date.now(), items: updatedTodos })\n              }\n            } catch (e) {}\n            // 刷新待办缓存，确保最新\n            prefetchTodosAll({ force: true })\n            closeEdit()\n            uni.showToast({ title: '已删除', icon: 'success' })\n          } else {\n            uni.showToast({ title: '删除失败', icon: 'none' })\n          }\n        },\n        fail: () => uni.showToast({ title: '网络异常', icon: 'none' })\n      })\n    }\n  })\n}\n\n// 预取待办，给待办页用缓存秒开\nconst prefetchTodosAll = ({ force = false } = {}) => {\n  try {\n    const cached = uni.getStorageSync(TODO_CACHE_KEY)\n    if (!force && cached && cached.ts && Date.now() - cached.ts < CACHE_TTL_MS) {\n      return\n    }\n  } catch (e) {}\n\n  uni.request({\n    url: `${BASE_URL}/todos/`,\n    method: 'GET',\n    data: { tab: 'all' },\n    success: (res) => {\n      if (res.statusCode === 200 && res.data && Array.isArray(res.data.items)) {\n        uni.setStorageSync(TODO_CACHE_KEY, { ts: Date.now(), items: res.data.items })\n      }\n    },\n  })\n}\n</script>\n\n<style scoped>\n.page {\r\n  padding: 24rpx;\r\n  padding-bottom: 220rpx; /* 给底部导航+悬浮按钮留空间 */\r\n}\r\n\r\n.header {\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.header-title {\r\n  font-size: 34rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.section {\r\n  margin-bottom: 32rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.timeline {\r\n  display: flex;\r\n}\r\n\r\n.timeline-line {\r\n  width: 4rpx;\r\n  background-color: #e5e5e5;\r\n  margin-right: 24rpx;\r\n  border-radius: 2rpx;\r\n}\r\n\r\n.timeline-list {\r\n  flex: 1;\r\n}\r\n\r\n.timeline-item {\r\n  position: relative;\r\n  padding-bottom: 24rpx;\r\n}\r\n\r\n.dot {\r\n  position: absolute;\r\n  left: -34rpx;\r\n  top: 4rpx;\r\n  width: 14rpx;\r\n  height: 14rpx;\r\n  border-radius: 50%;\r\n  background-color: #409eff;\r\n}\r\n\r\n.item-content {\r\n  display: flex;\r\n  align-items: baseline;\r\n}\r\n\r\n.item-time {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n  width: 140rpx;\r\n}\r\n\r\n.item-text {\r\n  font-size: 28rpx;\r\n}\r\n\r\n.empty {\r\n  padding-left: 24rpx;\r\n  color: #ccc;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.fab {\n  position: fixed;\n  right: 34rpx;\n  bottom: 180rpx; /* 与待办页一致，避免切换位移 */\n  width: 88rpx;\n  height: 88rpx;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #eef2ff, #e4e9ff);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 12rpx 24rpx rgba(0, 0, 0, 0.14);\n  z-index: 950;\n}\n\n.fab-plus {\n  color: #3d4ed1;\n  font-size: 48rpx;\n  line-height: 1;\n}\n\r\n.add-mask {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.35);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999;\r\n  backdrop-filter: blur(4rpx);\r\n}\r\n\r\n.add-dialog {\r\n  width: 78%;\r\n  max-width: 620rpx;\r\n  background-color: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 36rpx 32rpx 28rpx;\r\n  box-shadow: 0 18rpx 40rpx rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.add-title {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.add-input-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  flex-wrap: wrap;\r\n  padding: 16rpx 14rpx;\r\n  margin-bottom: 12rpx;\r\n  border-radius: 14rpx;\r\n  background-color: #f6f8fa;\r\n}\r\n\r\n.add-input-row input {\r\n  flex: 1;\r\n  border: 1rpx solid #e5e5e5;\r\n  border-radius: 12rpx;\r\n  padding: 18rpx 18rpx;\r\n  height: 76rpx;\r\n  line-height: 36rpx;\r\n  font-size: 26rpx;\r\n  box-sizing: border-box;\r\n  min-width: 0;\r\n}\r\n\r\n.add-input-row button {\r\n  flex-shrink: 0;\r\n  height: 76rpx;\r\n  line-height: 76rpx;\r\n  padding: 0 26rpx;\r\n}\r\n\r\n.add-tip {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin: 0 4rpx 18rpx;\r\n}\r\n\r\n.add-option {\r\n  padding: 18rpx 12rpx;\r\n  border-radius: 12rpx;\r\n  margin-bottom: 12rpx;\r\n  background-color: #f7f7f7;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.add-option:active {\r\n  background-color: #e6f0ff;\r\n}\r\n\r\n.add-actions {\n  margin-top: 24rpx;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.edit-mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.35);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.edit-panel {\n  width: 86%;\n  max-width: 640rpx;\n  background: #ffffff;\n  border-radius: 20rpx;\n  padding: 28rpx 24rpx 22rpx;\n  box-shadow: 0 16rpx 36rpx rgba(0, 0, 0, 0.18);\n}\n\n.edit-title {\n  font-size: 30rpx;\n  font-weight: 700;\n  margin-bottom: 18rpx;\n}\n\n.edit-field {\n  margin-bottom: 14rpx;\n}\n\n.edit-label {\n  display: block;\n  font-size: 24rpx;\n  color: #5f6675;\n  margin-bottom: 8rpx;\n}\n\n.edit-input {\n  width: 100%;\n  border: 1rpx solid #e5e7ef;\n  border-radius: 12rpx;\n  padding: 14rpx 16rpx;\n  height: 72rpx;\n  line-height: 44rpx;\n  font-size: 26rpx;\n  box-sizing: border-box;\n}\n\n.edit-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12rpx;\n  margin-top: 6rpx;\n}\n\n.edit-btn {\n  padding: 12rpx 22rpx;\n  border-radius: 12rpx;\n  font-size: 24rpx;\n  border: 1rpx solid #e5e7ef;\n}\n\n.edit-btn.primary {\n  background: #f4f6ff;\n  color: #3d4ed1;\n  border-color: #d9defc;\n}\n\n.edit-btn.danger {\n  background: #ffffff;\n  color: #d65a5a;\n  border-color: #f7dada;\n}\n\r\n.bottom-nav {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 120rpx;\r\n  background-color: #ffffff;\r\n  border-top: 1rpx solid #e5e5e5;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  padding-bottom: 16rpx;\r\n  z-index: 900;\r\n}\r\n\r\n.nav-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex: 1;\r\n  color: #7a7f8c;\r\n  font-size: 24rpx;\r\n  padding: 10rpx 0;\r\n}\r\n\r\n.nav-item.active {\r\n  color: #1f2d4a;\r\n  font-weight: 700;\r\n}\r\n\r\n.nav-label.main {\r\n  font-size: 26rpx;\r\n  letter-spacing: 0.4rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/projects2/kage-life/kage-life-uniapp-v25.11.0/kage-life-uniapp-v25.11.0/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","m","computed","now","y","d"],"mappings":"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"}