"use strict";const e=require("../../common/vendor.js"),t={__name:"index",setup(t){const a=e.ref([]),s=e.ref(!1),o=e.ref("");e.onLoad((()=>{n()}));const n=()=>{s.value=!0,o.value="",e.index.request({url:"http://149.248.4.231:8000/api/events/",method:"GET",data:{date:i},success:e=>{200===e.statusCode&&e.data&&Array.isArray(e.data.events)?a.value=e.data.events.map((e=>({id:e.id,time:e.start_time||"",title:e.title||"",raw:e}))):(o.value="接口返回异常",console.log("接口异常",e))},fail:e=>{o.value="网络请求失败",console.error("请求失败",e)},complete:()=>{s.value=!1}})},i=(new Date).toISOString().slice(0,10),l=e.computed((()=>{const e=[],t=[],s=[],o=[];return[...a.value].sort(((e,t)=>e.time.localeCompare(t.time))).forEach((a=>{const n=(e=>{const[t,a]=e.split(":").map(Number);return 60*t+a})(a.time);n<690?e.push(a):n>=690&&n<=810?t.push(a):n<1050?s.push(a):o.push(a)})),[{key:"morning",label:"上午",items:e},{key:"noon",label:"中午（11:30-13:30）",items:t},{key:"afternoon",label:"下午",items:s},{key:"night",label:"晚上（17:30以后）",items:o}]})),r=()=>{e.index.showToast({title:"TODO: 打开新增事项页面",icon:"none"})};return(t,a)=>({a:e.t(e.unref(i)),b:e.f(l.value,((t,a,s)=>e.e({a:e.t(t.label),b:t.items.length},t.items.length?{c:e.f(t.items,((t,a,s)=>({a:e.t(t.time),b:e.t(t.title),c:t.id})))}:{},{d:t.key}))),c:e.o(r)})}},a=e._export_sfc(t,[["__scopeId","data-v-95d28823"]]);wx.createPage(a);
